<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Barre de basculement jour/nuit avec D3.js</title>
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <style>
    .toggle-bar {
      width: 200px;
      height: 40px;
      border-radius: 20px;
      background-color: #ddd;
      position: relative;
      cursor: pointer;
    }
    .toggle-circle {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background-color: #fff;
      position: absolute;
      top: 2px;
      left: 2px;
      transition: transform 0.3s ease;
    }
  </style>
</head>
<body>

<div class="toggle-bar" id="toggleBar">
  <div class="toggle-circle"></div>
</div>

<script>
  const toggleBar = d3.select("#toggleBar");

  function toggleMode() {
    const circle = toggleBar.select(".toggle-circle");
    const currentX = parseFloat(circle.style("transform").split(",")[4]) || 0; // Obtenir la position X actuelle

    let newX = currentX === 0 ? 100 : 0; // Changer la position en fonction de la position actuelle

    // Limiter le déplacement du cercle à l'intérieur de la barre de basculement
    if (newX > 20) {
      newX = 100;
    } else if (newX < -20) {
      newX = 0;
    }

    toggleBar.style("background-color", newX === 0 ? "#333" : "#ddd");
    circle.style("transform", `translateX(${newX}px)`);
  }

  toggleBar.on("click", toggleMode);
</script>

</body>
</html>
