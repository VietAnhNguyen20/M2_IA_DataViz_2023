<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Barre de basculement jour/nuit avec D3.js</title>
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <style>
    .toggle-bar {
      width: 90px;
      height: 40px;
      border-radius: 20px;
      background-color: #ddd;
      position: relative;
      cursor: pointer;
    }
    .toggle-circle {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background-color: #fff;
      position: absolute;
      top: 2px;
      left: 2px;
      transition: transform 0.3s ease;
    }
  </style>
</head>
<body>

<div class="toggle-bar" id="toggleBar">
  <div class="toggle-circle"></div>
</div>

<script>
  const toggleBar = d3.select("#toggleBar");

  function toggleMode() {
    const circle = toggleBar.select(".toggle-circle");
    const isNightMode = circle.node().getBoundingClientRect().left > 20;

    if (isNightMode) {
      toggleBar.style("background-color", "#ddd");
      circle.style("transform", "translateX(0)");
    } else {
      toggleBar.style("background-color", "#333");
      circle.style("transform", "translateX(100px)");
    }
  }

  toggleBar.on("click", toggleMode);
</script>

</body>
</html>
